{"remainingRequest":"c:\\wamp64\\www\\SIIL-Diciembre2020-Trabajando\\siil-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\wamp64\\www\\SIIL-Diciembre2020-Trabajando\\siil-front\\src\\components\\AnioGraduacion.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\wamp64\\www\\SIIL-Diciembre2020-Trabajando\\siil-front\\src\\components\\AnioGraduacion.vue","mtime":1617473041960},{"path":"c:\\wamp64\\www\\SIIL-Diciembre2020-Trabajando\\siil-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610378888681},{"path":"c:\\wamp64\\www\\SIIL-Diciembre2020-Trabajando\\siil-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"c:\\wamp64\\www\\SIIL-Diciembre2020-Trabajando\\siil-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610378888681},{"path":"c:\\wamp64\\www\\SIIL-Diciembre2020-Trabajando\\siil-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGFycmF5QW5pb3M6W10sCiAgICAgIGhUQkFuaW86WwogICAgICAgIHt0ZXh0OiJBw7FvIiwgdmFsdWU6ImFuaW8iICwgY2xhc3M6J2JsdWUtZ3JleSBsaWdodGVuLTQgJ30sCiAgICAgICAge3RleHQ6IkFjY2lvbiIsIHZhbHVlOiJhY3Rpb24iLHNvcnRhYmxlOmZhbHNlLGFsaW5nOiJjZW50ZXIiLGNsYXNzOidibHVlLWdyZXkgbGlnaHRlbi00J30sCiAgICAgIF0sCiAgICAgIGxvYWRlcjpmYWxzZSwKICAgICAgbW9kYWxBbmlvczpmYWxzZSwKICAgICAgYW5pb3M6ewogICAgICAgIGlkOiIiLAogICAgICAgIGFuaW86IiIsCiAgICAgIH0sCiAgICAgIHZhbGlkRm9ybTp0cnVlLAogICAgICBzbmFja2JhcjpmYWxzZSwKICAgICAgbXNqU25hY2tCYXI6IiIsCiAgICAgIGVycm9yc05vbWJyZTpbXSwKICAgICAgZWRpdGVkQW5pbzotMSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogIAogIH0sCiAgCiAgbWV0aG9kczogewogICAgZmV0Y2hBbmlvKCkgeyAgCiAgICAgIGxldCB0b2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuUycpOwogICAgICBsZXQgbWUgPSB0aGlzLAogICAgICAgaGVhZGVyID0gewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyICIrIHRva2VuLAogICAgICAgICAgICAgIAogICAgICAgICAgICB9LAogICAgICAgICAgfTsKICAgICAgICAgICAgIAogICAgICBtZS5sb2FkZXIgPSB0cnVlOwogICAgICBtZS4kaHR0cC5nZXQoYCR7bWUuJHVybH0vYW5pb19ncmFkdWFjaW9uYCxoZWFkZXIpCiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgbWUuYXJyYXlBbmlvcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgbWUubG9hZGVyID0gZmFsc2U7CiAgICAgIH0pCiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcil7CiAgICAgICAgbWUubG9hZGVyID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBjZXJyYXJNb2RhbCgpewogICAgICBsZXQgbWUgPSB0aGlzOwogICAgICBtZS5tb2RhbEFuaW9zID0gZmFsc2U7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIG1lLmFuaW9zPXsKICAgICAgICAgIGlkOm51bGwsCiAgICAgICAgICBhbmlvOiIiLAogICAgICAgIH07CiAgICAgICAgbWUucmVzZXRWYWxpZGF0aW9uKCk7CiAgICAgIH0sIDMwMCk7CiAgICB9LAogICAgcmVzZXRWYWxpZGF0aW9uKCkgewogICAgICBsZXQgbWUgPSB0aGlzOwogICAgICBtZS5lcnJvcnNOb21icmUgPSBbXTsKICAgICAgbWUuJHJlZnMuZm9ybUFuaW8ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICB9LAogICAgc2hvd01vZGFsRWRpdGFyKGFuaW9zKSB7CiAgICAgIGxldCBtZSA9IHRoaXM7CiAgICAgIG1lLmVkaXRlZEFuaW8gPSBtZS5hcnJheUFuaW9zLmluZGV4T2YoYW5pb3MpOwogICAgICBtZS5hbmlvcyA9IE9iamVjdC5hc3NpZ24oe30sYW5pb3MpOwogICAgICBtZS5tb2RhbEFuaW9zID0gdHJ1ZTsKICAgIH0sCiAgICB1cGRhdGVBbmlvKCkgewoKICAgbGV0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgIGxldCBtZSA9IHRoaXMsCiAgICAgICBoZWFkZXIgPSB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICJCZWFyZXIgIisgdG9rZW4sCiAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9OwoKICAgIGxldCBUb2FzdCA9IG1lLiRzd2FsLm1peGluKHsKICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICBwb3NpdGlvbjogImJvdHRvbS1lbmQiLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgIHRpbWVyOiAzMDAwCiAgICAgIH0pOwoKICAgIGlmIChtZS4kcmVmcy5mb3JtQW5pby52YWxpZGF0ZSgpKXsKICAgICAgbWUuJGh0dHAucHV0KGAke21lLiR1cmx9L2FuaW9fZ3JhZHVhY2lvbi91cGRhdGVgLG1lLmFuaW9zLCBoZWFkZXIpCiAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTsKICAgICAgICAgICAgbWUudmVyaWZpY2FyQWNjaW9uRGF0byhyZXNwb25zZS5kYXRhLCByZXNwb25zZS5zdGF0dXMsICJ1cGQiKTsKICAgICAgICAgICAgIG1lLmNlcnJhck1vZGFsKCk7CiAgICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgIFRvYXN0LmZpcmUoewogICAgICAgICAgICBpY29uOiJlcnJvciIsCiAgICAgICAgICAgIHRpdGxlOiAiVXBzIE9jdXJyacOzIHVuIGVycm9yLCBJbnRlbnRhIG51ZXZhbWVudGUiCiAgICAgICAgICB9KTsKICAgICAgICAgIG1lLmxvYWRlciA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfQogIH0sCiAgIHZlcmlmaWNhckFjY2lvbkRhdG8oYW5pb3MsIHN0YXR1c0NvZGUsIGFjY2lvbikgewogICAgICBsZXQgbWUgPSB0aGlzOwoKICAgICAgY29uc3QgVG9hc3QgPSBtZS4kc3dhbC5taXhpbih7CiAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgcG9zaXRpb246ICJib3R0b20tZW5kIiwKICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgICAgICB0aW1lcjogMzAwMAogICAgICB9KTsKCiAgICAgIHN3aXRjaCAoYWNjaW9uKSB7CiAgICAgICAgY2FzZSAidXBkIjoKICAgICAgICAgIHRoaXMuZmV0Y2hBbmlvKCk7IAogICAgICAgICAgVG9hc3QuZmlyZSh7CiAgICAgICAgICAgIGljb246InN1Y2Nlc3MiLAogICAgICAgICAgICB0aXRsZTogIkHDsW8gZGUgR3JhZHVhY2lvbiBBY3R1YWxpemFkbyIKICAgICAgICAgIH0pOwogICAgICAgICAgbWUubG9hZGVyID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIHNldE1lc3NhZ2VUb1NuYWNrQmFyKG1zaiwgZXN0YWRvKSB7CiAgICAgIGxldCBtZSA9IHRoaXM7CiAgICAgIG1lLnNuYWNrYmFyID0gZXN0YWRvOwogICAgICBtZS5tc2pTbmFja0JhciA9IG1zajsKICAgIH0sCiAgICAKICB9LAogIG1vdW50ZWQoKSB7CiAgICAgbGV0IG1lID0gdGhpczsKICAgICBtZS5mZXRjaEFuaW8oKTsKICAgIGxldCB4ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5TJyk7CiAgICBpZih4ICE9IG51bGwpewogICAgICBtZS5mZXRjaEFuaW8oKTsKICAgIH1lbHNlewogICAgICAgCiAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJykKICAgIH0KICAgICAKICB9LAp9Owo="},{"version":3,"sources":["AnioGraduacion.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"AnioGraduacion.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n<div class=\"content\">\r\n  \r\n  \r\n  <div class=\"md-layout-item md-medium-size-100 md-xsmall-sixe-100 md-size-100\">\r\n    \r\n    <v-overlay :value=\"loader\" :z-index=\"'99999999'\">\r\n        <v-progress-circular indeterminate size=\"80\" color=\"grey darken-4\"></v-progress-circular>\r\n    </v-overlay>\r\n    <v-card>\r\n      <v-card-title>\r\n        Año de Graduacion\r\n       <div class=\"flex-grow-1\"></div>\r\n      </v-card-title>\r\n      <v-data-table\r\n        \r\n        :headers=\"hTBAnio\"\r\n        :items=\"arrayAnios\"\r\n        :footer-props=\"{\r\n          'items-per-page-options' :[1],\r\n          'items-per-page-text' :'Registros por Página'\r\n        }\"\r\n        :items-per-page=\"1\"\r\n        multi-sort\r\n        class=\"elevation-3 text--center ml-80 pl-10 pr-10\"\r\n      >\r\n      <!-- Templeate para form modal para agregar o actualizar categorias-->\r\n    <template v-slot:top>\r\n      <v-toolbar flat color=\"white\">\r\n        \r\n        <div class=\"flex-grow-1\"></div>\r\n        <v-dialog v-model=\"modalAnios\" persistent max-width=\"400px\">\r\n          <v-card>\r\n            <v-card-title class=\"headline light-blue lighten-5\" primary-titles>\r\n              <span class=\"headline\">Actualizarcion de año de Graduacion</span>\r\n            </v-card-title>\r\n            <v-card-text>\r\n              <v-container>\r\n                <v-form ref=\"formAnio\" v-model=\"validForm\" :lazy-validation=\"true\">\r\n                 <v-text-field\r\n                  v-model=\"anios.anio\"\r\n                  @keyup=\"errorsNombre = []\"\r\n                  label=\"Año de Graduacion\"\r\n                  :error-messages=\"errorsNombre\"\r\n                  ></v-text-field>\r\n                </v-form>\r\n              </v-container>\r\n            </v-card-text>\r\n            <v-divider></v-divider>           \r\n              <v-card-actions>\r\n                <div class=\"flex-grow-1\"></div>\r\n                <v-btn color=\"red darken-1\" text @click=\"cerrarModal\">Cerrar</v-btn>\r\n                <v-btn\r\n                  color=\"info darken-1\"\r\n                  :disabled=\"!validForm\"\r\n                  @click=\"updateAnio()\"\r\n                  text\r\n                  \r\n                >Actualizar año de Graduacion</v-btn>\r\n              </v-card-actions>          \r\n          </v-card>\r\n        </v-dialog>\r\n      </v-toolbar>\r\n</template>\r\n      <!--Template para la columna de acciones -->\r\n      <template v-slot:item.action=\"{item}\">\r\n        <v-tooltip top>\r\n          <template v-slot:activator=\"{on}\">\r\n            <v-btn\r\n              color=\"success\"            \r\n              elevation=\"8\"\r\n              small\r\n              fab\r\n              dark\r\n              :disabled=\"item.id<0\"\r\n              v-on=\"on\"\r\n              @click=\"showModalEditar(item)\"\r\n            >\r\n            <v-icon>create</v-icon>\r\n            </v-btn>\r\n          </template>\r\n          <span>Actualizar Datos</span>\r\n        </v-tooltip>     \r\n      </template>\r\n      <v-snackbar v-model=\"snackbar\">\r\n          {{ msjSnackBar}}\r\n          <v-btn color=\"red\" text @click=\"snackbar = false\">Cerrar</v-btn>\r\n      </v-snackbar>\r\n      </v-data-table>\r\n    </v-card>\r\n  </div>\r\n</div>\r\n  \r\n</template>\r\n<script>\r\n  export default {\r\n    data () {\r\n      return {\r\n        arrayAnios:[],\r\n        hTBAnio:[\r\n          {text:\"Año\", value:\"anio\" , class:'blue-grey lighten-4 '},\r\n          {text:\"Accion\", value:\"action\",sortable:false,aling:\"center\",class:'blue-grey lighten-4'},\r\n        ],\r\n        loader:false,\r\n        modalAnios:false,\r\n        anios:{\r\n          id:\"\",\r\n          anio:\"\",\r\n        },\r\n        validForm:true,\r\n        snackbar:false,\r\n        msjSnackBar:\"\",\r\n        errorsNombre:[],\r\n        editedAnio:-1,\r\n      };\r\n    },\r\n    computed: {\r\n    \r\n    },\r\n    \r\n    methods: {\r\n      fetchAnio() {  \r\n        let token = sessionStorage.getItem('tokenS');\r\n        let me = this,\r\n         header = {\r\n              headers: {\r\n                \"Authorization\": \"Bearer \"+ token,\r\n                \r\n              },\r\n            };\r\n               \r\n        me.loader = true;\r\n        me.$http.get(`${me.$url}/anio_graduacion`,header)\r\n        .then(function(response){\r\n            console.log(response.data)\r\n          me.arrayAnios = response.data;\r\n          me.loader = false;\r\n        })\r\n        .catch(function(error){\r\n          me.loader = false;\r\n          console.log(error);\r\n        });\r\n      },\r\n      cerrarModal(){\r\n        let me = this;\r\n        me.modalAnios = false;\r\n        setTimeout(() => {\r\n          me.anios={\r\n            id:null,\r\n            anio:\"\",\r\n          };\r\n          me.resetValidation();\r\n        }, 300);\r\n      },\r\n      resetValidation() {\r\n        let me = this;\r\n        me.errorsNombre = [];\r\n        me.$refs.formAnio.resetValidation();\r\n      },\r\n      showModalEditar(anios) {\r\n        let me = this;\r\n        me.editedAnio = me.arrayAnios.indexOf(anios);\r\n        me.anios = Object.assign({},anios);\r\n        me.modalAnios = true;\r\n      },\r\n      updateAnio() {\r\n\r\n     let token = localStorage.getItem('token');\r\n        let me = this,\r\n         header = {\r\n              headers: {\r\n                \"Authorization\": \"Bearer \"+ token,\r\n                \r\n              },\r\n            };\r\n\r\n      let Toast = me.$swal.mixin({\r\n          toast: true,\r\n          position: \"bottom-end\",\r\n          showConfirmButton: true,\r\n          timer: 3000\r\n        });\r\n\r\n      if (me.$refs.formAnio.validate()){\r\n        me.$http.put(`${me.$url}/anio_graduacion/update`,me.anios, header)\r\n            .then(function(response) {\r\n              console.log(response.data);\r\n              console.log(response.status);\r\n              me.verificarAccionDato(response.data, response.status, \"upd\");\r\n               me.cerrarModal();\r\n            })\r\n          .catch(function(error) {\r\n            console.log(error);\r\n             Toast.fire({\r\n              icon:\"error\",\r\n              title: \"Ups Ocurrió un error, Intenta nuevamente\"\r\n            });\r\n            me.loader = false;\r\n          });\r\n      }\r\n    },\r\n     verificarAccionDato(anios, statusCode, accion) {\r\n        let me = this;\r\n\r\n        const Toast = me.$swal.mixin({\r\n          toast: true,\r\n          position: \"bottom-end\",\r\n          showConfirmButton: true,\r\n          timer: 3000\r\n        });\r\n\r\n        switch (accion) {\r\n          case \"upd\":\r\n            this.fetchAnio(); \r\n            Toast.fire({\r\n              icon:\"success\",\r\n              title: \"Año de Graduacion Actualizado\"\r\n            });\r\n            me.loader = false;\r\n            break;\r\n        }\r\n      },\r\n      setMessageToSnackBar(msj, estado) {\r\n        let me = this;\r\n        me.snackbar = estado;\r\n        me.msjSnackBar = msj;\r\n      },\r\n      \r\n    },\r\n    mounted() {\r\n       let me = this;\r\n       me.fetchAnio();\r\n      let x = sessionStorage.getItem('tokenS');\r\n      if(x != null){\r\n        me.fetchAnio();\r\n      }else{\r\n         \r\n         this.$router.push('/login')\r\n      }\r\n       \r\n    },\r\n  };\r\n</script>"]}]}